# ğŸ‘» 17837. ìƒˆë¡œìš´ ê²Œì„ 2 

[ğŸ“ ë¬¸ì œë§í¬]: https://www.acmicpc.net/problem/17837



#### ğŸ’â€â™€ï¸ ë¬¸ì œ ì„¤ëª…

ì¬í˜„ì´ëŠ” ì£¼ë³€ì„ ì‚´í´ë³´ë˜ ì¤‘ ì²´ìŠ¤íŒê³¼ ë§ì„ ì´ìš©í•´ì„œ ìƒˆë¡œìš´ ê²Œì„ì„ ë§Œë“¤ê¸°ë¡œ í–ˆë‹¤. ìƒˆë¡œìš´ ê²Œì„ì€ í¬ê¸°ê°€ NÃ—Nì¸ ì²´ìŠ¤íŒì—ì„œ ì§„í–‰ë˜ê³ , ì‚¬ìš©í•˜ëŠ” ë§ì˜ ê°œìˆ˜ëŠ” Kê°œì´ë‹¤. ë§ì€ ì›íŒëª¨ì–‘ì´ê³ , í•˜ë‚˜ì˜ ë§ ìœ„ì— ë‹¤ë¥¸ ë§ì„ ì˜¬ë¦´ ìˆ˜ ìˆë‹¤. ì²´ìŠ¤íŒì˜ ê° ì¹¸ì€ í°ìƒ‰, ë¹¨ê°„ìƒ‰, íŒŒë€ìƒ‰ ì¤‘ í•˜ë‚˜ë¡œ ìƒ‰ì¹ ë˜ì–´ìˆë‹¤.

ê²Œì„ì€ ì²´ìŠ¤íŒ ìœ„ì— ë§ Kê°œë¥¼ ë†“ê³  ì‹œì‘í•œë‹¤. ë§ì€ 1ë²ˆë¶€í„° Kë²ˆê¹Œì§€ ë²ˆí˜¸ê°€ ë§¤ê²¨ì ¸ ìˆê³ , ì´ë™ ë°©í–¥ë„ ë¯¸ë¦¬ ì •í•´ì ¸ ìˆë‹¤. ì´ë™ ë°©í–¥ì€ ìœ„, ì•„ë˜, ì™¼ìª½, ì˜¤ë¥¸ìª½ 4ê°€ì§€ ì¤‘ í•˜ë‚˜ì´ë‹¤.

í„´ í•œ ë²ˆì€ 1ë²ˆ ë§ë¶€í„° Kë²ˆ ë§ê¹Œì§€ ìˆœì„œëŒ€ë¡œ ì´ë™ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤. í•œ ë§ì´ ì´ë™í•  ë•Œ ìœ„ì— ì˜¬ë ¤ì ¸ ìˆëŠ” ë§ë„ í•¨ê»˜ ì´ë™í•œë‹¤. ë§ì˜ ì´ë™ ë°©í–¥ì— ìˆëŠ” ì¹¸ì— ë”°ë¼ì„œ ë§ì˜ ì´ë™ì´ ë‹¤ë¥´ë©° ì•„ë˜ì™€ ê°™ë‹¤. í„´ì´ ì§„í–‰ë˜ë˜ ì¤‘ì— ë§ì´ 4ê°œ ì´ìƒ ìŒ“ì´ëŠ” ìˆœê°„ ê²Œì„ì´ ì¢…ë£Œëœë‹¤.

- Aë²ˆ ë§ì´ ì´ë™í•˜ë ¤ëŠ” ì¹¸ì´
  - í°ìƒ‰ì¸ ê²½ìš°ì—ëŠ” ê·¸ ì¹¸ìœ¼ë¡œ ì´ë™í•œë‹¤. ì´ë™í•˜ë ¤ëŠ” ì¹¸ì— ë§ì´ ì´ë¯¸ ìˆëŠ” ê²½ìš°ì—ëŠ” ê°€ì¥ ìœ„ì— Aë²ˆ ë§ì„ ì˜¬ë ¤ë†“ëŠ”ë‹¤.
    - Aë²ˆ ë§ì˜ ìœ„ì— ë‹¤ë¥¸ ë§ì´ ìˆëŠ” ê²½ìš°ì—ëŠ” Aë²ˆ ë§ê³¼ ìœ„ì— ìˆëŠ” ëª¨ë“  ë§ì´ ì´ë™í•œë‹¤.
    - ì˜ˆë¥¼ ë“¤ì–´, A, B, Cë¡œ ìŒ“ì—¬ìˆê³ , ì´ë™í•˜ë ¤ëŠ” ì¹¸ì— D, Eê°€ ìˆëŠ” ê²½ìš°ì—ëŠ” Aë²ˆ ë§ì´ ì´ë™í•œ í›„ì—ëŠ” D, E, A, B, Cê°€ ëœë‹¤.
  - ë¹¨ê°„ìƒ‰ì¸ ê²½ìš°ì—ëŠ” ì´ë™í•œ í›„ì— Aë²ˆ ë§ê³¼ ê·¸ ìœ„ì— ìˆëŠ” ëª¨ë“  ë§ì˜ ìŒ“ì—¬ìˆëŠ” ìˆœì„œë¥¼ ë°˜ëŒ€ë¡œ ë°”ê¾¼ë‹¤.
    - A, B, Cê°€ ì´ë™í•˜ê³ , ì´ë™í•˜ë ¤ëŠ” ì¹¸ì— ë§ì´ ì—†ëŠ” ê²½ìš°ì—ëŠ” C, B, Aê°€ ëœë‹¤.
    - A, D, F, Gê°€ ì´ë™í•˜ê³ , ì´ë™í•˜ë ¤ëŠ” ì¹¸ì— ë§ì´ E, C, Bë¡œ ìˆëŠ” ê²½ìš°ì—ëŠ” E, C, B, G, F, D, Aê°€ ëœë‹¤.
  - íŒŒë€ìƒ‰ì¸ ê²½ìš°ì—ëŠ” Aë²ˆ ë§ì˜ ì´ë™ ë°©í–¥ì„ ë°˜ëŒ€ë¡œ í•˜ê³  í•œ ì¹¸ ì´ë™í•œë‹¤. ë°©í–¥ì„ ë°˜ëŒ€ë¡œ ë°”ê¾¼ í›„ì— ì´ë™í•˜ë ¤ëŠ” ì¹¸ì´ íŒŒë€ìƒ‰ì¸ ê²½ìš°ì—ëŠ” ì´ë™í•˜ì§€ ì•Šê³  ê°€ë§Œíˆ ìˆëŠ”ë‹¤.
  - ì²´ìŠ¤íŒì„ ë²—ì–´ë‚˜ëŠ” ê²½ìš°ì—ëŠ” íŒŒë€ìƒ‰ê³¼ ê°™ì€ ê²½ìš°ì´ë‹¤.

ë‹¤ìŒì€ í¬ê¸°ê°€ 4Ã—4ì¸ ì²´ìŠ¤íŒ ìœ„ì— ë§ì´ 4ê°œ ìˆëŠ” ê²½ìš°ì´ë‹¤.

![img](assets/preview.png)

ì²« ë²ˆì§¸ í„´ì€ ë‹¤ìŒê³¼ ê°™ì´ ì§„í–‰ëœë‹¤.

| ![img](assets/preview-1677162881928-1.png) | ![img](assets/preview-1677162881929-2.png) | ![img](assets/preview-1677162881931-3.png) | ![img](assets/preview-1677162881933-4.png) |
| ------------------------------------------ | ------------------------------------------ | ------------------------------------------ | ------------------------------------------ |
|                                            |                                            |                                            |                                            |

ë‘ ë²ˆì§¸ í„´ì€ ë‹¤ìŒê³¼ ê°™ì´ ì§„í–‰ëœë‹¤.

| ![img](assets/preview-1677162881934-5.png) | ![img](assets/preview-1677162881935-6.png) | ![img](assets/preview-1677162881936-7.png) | ![img](assets/preview-1677162881936-8.png) |
| ------------------------------------------ | ------------------------------------------ | ------------------------------------------ | ------------------------------------------ |
|                                            |                                            |                                            |                                            |

ì²´ìŠ¤íŒì˜ í¬ê¸°ì™€ ë§ì˜ ìœ„ì¹˜, ì´ë™ ë°©í–¥ì´ ëª¨ë‘ ì£¼ì–´ì¡Œì„ ë•Œ, ê²Œì„ì´ ì¢…ë£Œë˜ëŠ” í„´ì˜ ë²ˆí˜¸ë¥¼ êµ¬í•´ë³´ì.





##### ì…ë ¥

> ì²«ì§¸ ì¤„ì— ì²´ìŠ¤íŒì˜ í¬ê¸° N, ë§ì˜ ê°œìˆ˜ Kê°€ ì£¼ì–´ì§„ë‹¤. ë‘˜ì§¸ ì¤„ë¶€í„° Nê°œì˜ ì¤„ì— ì²´ìŠ¤íŒì˜ ì •ë³´ê°€ ì£¼ì–´ì§„ë‹¤. ì²´ìŠ¤íŒì˜ ì •ë³´ëŠ” ì •ìˆ˜ë¡œ ì´ë£¨ì–´ì ¸ ìˆê³ , ê° ì •ìˆ˜ëŠ” ì¹¸ì˜ ìƒ‰ì„ ì˜ë¯¸í•œë‹¤. 0ì€ í°ìƒ‰, 1ì€ ë¹¨ê°„ìƒ‰, 2ëŠ” íŒŒë€ìƒ‰ì´ë‹¤.
>
> ë‹¤ìŒ Kê°œì˜ ì¤„ì— ë§ì˜ ì •ë³´ê°€ 1ë²ˆ ë§ë¶€í„° ìˆœì„œëŒ€ë¡œ ì£¼ì–´ì§„ë‹¤. ë§ì˜ ì •ë³´ëŠ” ì„¸ ê°œì˜ ì •ìˆ˜ë¡œ ì´ë£¨ì–´ì ¸ ìˆê³ , ìˆœì„œëŒ€ë¡œ í–‰, ì—´ì˜ ë²ˆí˜¸, ì´ë™ ë°©í–¥ì´ë‹¤. í–‰ê³¼ ì—´ì˜ ë²ˆí˜¸ëŠ” 1ë¶€í„° ì‹œì‘í•˜ê³ , ì´ë™ ë°©í–¥ì€ 4ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ìì—°ìˆ˜ì´ê³  1ë¶€í„° ìˆœì„œëŒ€ë¡œ â†’, â†, â†‘, â†“ì˜ ì˜ë¯¸ë¥¼ ê°–ëŠ”ë‹¤.
>
> ê°™ì€ ì¹¸ì— ë§ì´ ë‘ ê°œ ì´ìƒ ìˆëŠ” ê²½ìš°ëŠ” ì…ë ¥ìœ¼ë¡œ ì£¼ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤.



ì¶œë ¥

> ê²Œì„ì´ ì¢…ë£Œë˜ëŠ” í„´ì˜ ë²ˆí˜¸ë¥¼ ì¶œë ¥í•œë‹¤. ê·¸ ê°’ì´ 1,000ë³´ë‹¤ í¬ê±°ë‚˜ ì ˆëŒ€ë¡œ ê²Œì„ì´ ì¢…ë£Œë˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ëŠ” -1ì„ ì¶œë ¥í•œë‹¤.

---------------------------



#### ğŸ¤¸â€â™‚ï¸ ë¬¸ì œ í•´ê²°

```python
import sys
input = sys.stdin.readline

dx = [1, 0, 0, -1]
dy = [0, 1, -1, 0]

N, K = map(int,input().split())
board = [list(map(int,input().split())) for _ in range(N)]

chess = list([[] for _ in range(N)] for _ in range(N)) # ë³´ë“œ ìœ„ ë§ í‘œì‹œ
info = [] # 1~kë²ˆë§ ìœ„ì¹˜,ë°©í–¥

for i in range(K):
    x, y, d = map(int,input().split())
    chess[x-1][y-1].append(i) 
    info.append([x-1,y-1,d%4])

cnt, result = 0, -1
while cnt <= 1000 and result < 0: 
    cnt += 1
    for i in range(K): # ìˆœì„œëŒ€ë¡œ ì´ë™
        x, y, d = info[i][0], info[i][1], info[i][2]
        nx, ny = x + dx[d], y + dy[d] 

        if nx < 0 or nx >= N or ny < 0 or ny >= N or board[nx][ny] == 2: # íŒŒë€ìƒ‰ì¼ ê²½ìš°
            if d == 0 or d == 2: # ë°©í–¥ ì „í™˜
                d = (d-1) % 4
            else:
                d = (d+1) % 4
            info[i][2] = d
            nx, ny = x + dx[d], y + dy[d]

        if 0 <= nx < N and 0 <= ny < N and board[nx][ny] < 2: # í°ìƒ‰ or ë¹¨ê°„ìƒ‰ì¼ ê²½ìš°
            idx = chess[x][y].index(i)
            tmp = chess[x][y][idx:] # ì´ë™ì‹œí‚¬ ë§ë“¤
            if board[nx][ny]: # ë¹¨ê°„ìƒ‰ì´ë©´ ìˆœì„œ ë°˜ëŒ€ë¡œ
                tmp.reverse()
            chess[nx][ny] += tmp
            chess[x][y] = chess[x][y][:idx]
            if len(chess[nx][ny]) >= 4: # 4ê°œ ì´ìƒ ëª¨ì˜€ìœ¼ë©´
                result = cnt
                break
            for j in tmp: # info ìœ„ì¹˜ ê°±ì‹ 
                info[j][0], info[j][1] = nx, ny

print(result)
```



##### *ì˜¤ë¥˜*

- 4ê°œ <u>**ì´ìƒ**</u>





