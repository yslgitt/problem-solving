# ðŸ’‚â€â™‚ï¸ ê²½ë¹„ì›



# code

``` python
l, h = map(int,input().split())
S = int(input())
location = [list(map(int, input().split())) for _ in range(S+1)]

# ì¢Œí‘œ ì°¾ê¸°
for i in location:
    if i[0] == 1:
        i.append(h)
    elif i[0] == 2:
        i.append(0)
    elif i[0] == 3:
        i.append(h-i[1])
        i[1] = 0
    elif i[0] == 4: 
        i.append(h-i[1])
        i[1] = l

mn = 0

for j in range(S):
    # ë§žì€ íŽ¸ì— ìžˆì„ ë•Œ
    if location[j][0]//3 == location[-1][0]//3 and location[j][0] != location[-1][0]: 
        if location[-1][0] == 3 or location[-1][0] == 4: # ë™, ì„œì— ìžˆì„ ë•Œ
            tmp = location[j][2] + location[-1][2] + l 
        else: # ë¶, ë‚¨ì— ìžˆì„ ë•Œ
            tmp = location[j][1] + location[-1][1] + h
    # ê·¸ ì™¸
    else:
        tmp = abs(location[j][1]-location[-1][1]) + abs(location[j][2]-location[-1][2])

	# ë§žì€ íŽ¸ ìµœì†Œ ê¸¸ì´ ì°¾ê¸°
    if tmp > 2*(l+h) - tmp:
        mn += 2*(l+h) - tmp
    else:
        mn += tmp

print(mn)
```



